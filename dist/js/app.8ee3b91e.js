(function(){"use strict";var t={2445:function(t,e,i){var s=i(144),a=i(1096),o=i(6035),n=i(3551),r=function(){var t=this,e=t._self._c;return e(a.Z,[t.checkSession()?t._e():e("WelcomeScreen",{on:{login:t.onLogin}}),e("AppLoader",{attrs:{onlyIf:t.loading}}),e("AppSaver",{attrs:{onlyIf:t.saving}}),!t.loading&&t.checkSession()?e("NavBar",{on:{logout:t.logout}}):t._e(),!t.loading&&t.checkSession()?e(n.Z,[e(o.Z,{staticClass:"pa-0 ma-0",staticStyle:{height:"90vh"},attrs:{fluid:""}},[e("MainTabs",{attrs:{"active-tab":t.activeTab},on:{onLoading:t.onLoading}})],1)],1):t._e()],1)},l=[],d=i(5057),c=i(3333),u=i(6878),h=i(4134),g=function(){var t=this,e=t._self._c;return e(h.Z,{staticStyle:{width:"30vw",margin:"2vh auto"},attrs:{"icons-and-text":"",grow:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[t._l(t.tabs,(function(i){return e(c.Z,{key:i.name},[e(d.Z,{attrs:{large:""}},[t._v(t._s(i.icon))]),e("div",{staticClass:"caption py-1"},[t._v(t._s(i.name))])],1)})),e(u.Z,[e("UserLogin",t._g({},t.$listeners))],1),e(u.Z,[e("UserRegister",{on:{registered:function(e){t.activeTab=0}}})],1)],2)},m=[],v=i(1828),p=i(3385),f=i(5223),Z=i(4437),b=i(6904),x=i(5294),y=i(5776),w=i(1692),I=i(5251),_=function(){var t=this,e=t._self._c;return e(p.Z,{attrs:{height:t.isProfile?"90vh":null}},[e(w.Z,{attrs:{value:t.loading,color:"success",top:"",app:""}},[t._v("Successful!")]),e(w.Z,{attrs:{color:"error",app:""},model:{value:t.noChanges,callback:function(e){t.noChanges=e},expression:"noChanges"}},[t._v("No changes to save!")]),e(f.ZB,[e(b.Z,{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(x.Z,{attrs:{justify:"space-around"}},[e(Z.Z,{attrs:{cols:"6"}},[e(I.Z,{attrs:{rules:[t.rules.required],label:"Name",maxlength:"20",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(Z.Z,{attrs:{cols:"4"}},[e(y.Z,{attrs:{rules:[t.rules.required],items:t.genders,label:"Gender",required:""},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}})],1),e(Z.Z,{attrs:{cols:"2"}},[e(I.Z,{attrs:{rules:[t.rules.required],label:"Age",type:"number",required:""},model:{value:t.age,callback:function(e){t.age=e},expression:"age"}})],1),e(Z.Z,{attrs:{cols:"6"}},[e(I.Z,{attrs:{rules:[t.rules.required],label:"Height (cm)",type:"number",required:""},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1),e(Z.Z,{attrs:{cols:"6"}},[e(I.Z,{attrs:{rules:[t.rules.required],label:"Weight (kg)",type:"number",required:""},model:{value:t.weight,callback:function(e){t.weight=e},expression:"weight"}})],1),e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t.isProfile?t._e():e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{"append-icon":t.show?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:"",autocomplete:"new-password"},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.isProfile?t._e():e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{block:"","append-icon":t.show?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.passwordMatch],type:t.show?"text":"password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(e){t.show=!t.show}},model:{value:t.verify,callback:function(e){t.verify=e},expression:"verify"}})],1),e(Z.Z,{staticClass:"d-flex justify-center",attrs:{cols:t.isProfile?3:12}},[e(v.Z,{attrs:{loading:t.loading,"x-large":"",block:"",disabled:!t.valid||t.loading,color:"success"},on:{click:t.validateRegisterForm}},[t._v(" "+t._s(t.isProfile?"Save":"Register")+" ")])],1)],1)],1)],1)],1)},k=[],$={name:"UserRegister",props:{isProfile:Boolean,user:Object},mounted(){this.isProfile&&(this.name=this.user.name,this.gender="M"===this.user.gender?"Male":"Female",this.age=this.user.age,this.height=this.user.height,this.weight=this.user.weight,this.email=this.user.email,this.password=this.user.password)},data:()=>({valid:!0,show:!1,loading:!1,noChanges:!1,name:"",gender:"",age:"",height:"",weight:"",email:"",password:"",verify:"",emailRules:[t=>!!t||"Required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"],rules:{required:t=>!!t||"Required.",min:t=>t&&t.length>=8||"Min 8 characters"},genders:["Male","Female"]}),computed:{passwordMatch(){return()=>this.password===this.verify||"Password must match"}},methods:{async validateRegisterForm(){if(this.$refs.registerForm.validate()){this.loading=!0;const t={name:this.name,email:this.email,age:this.age,gender:this.gender.charAt(0),height:this.height,weight:this.weight,password:this.password};this.isProfile?(t.id=this.user.id,Object.entries(t).sort().toString()===Object.entries(this.user).sort().toString()?(this.noChanges=!0,setTimeout((()=>this.noChanges=!1),2e3)):(await this.$axios.patch("api/users/"+this.$session.get("user").id,t),this.$session.set("user",t))):(await this.$axios.post("api/users",t),this.$refs.registerForm.reset(),this.$emit("registered")),this.loading=!1}}}},C=$,S=i(1001),A=(0,S.Z)(C,_,k,!1,null,"199e229c",null),P=A.exports,D=function(){var t=this,e=t._self._c;return e(p.Z,[e(w.Z,{attrs:{timeout:2e3,value:t.wrong,color:"error",top:""}},[t._v("Wrong credentials!")]),e(f.ZB,[e(b.Z,{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:t.validLogin,callback:function(e){t.validLogin=e},expression:"validLogin"}},[e(x.Z,[e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{rules:t.loginEmailRules,label:"E-mail",required:""},model:{value:t.loginEmail,callback:function(e){t.loginEmail=e},expression:"loginEmail"}})],1),e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.loginPassword,callback:function(e){t.loginPassword=e},expression:"loginPassword"}})],1),e(Z.Z,{staticClass:"d-flex",attrs:{cols:"12",sm:"12",xsm:"12"}},[e(v.Z,{attrs:{loading:t.loading,"x-large":"",block:"",disabled:!t.validLogin||t.loading,color:"success"},on:{click:t.validateLoginForm}},[t._v("Login ")])],1)],1)],1)],1)],1)},T=[],O={name:"UserLogin",data:()=>({rules:{required:t=>!!t||"Required.",min:t=>t&&t.length>=8||"Min 8 characters"},loading:!1,validLogin:!0,show1:!1,wrong:!1,loginPassword:"",loginEmail:"",loginEmailRules:[t=>!!t||"Required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"]}),methods:{validateLoginForm(){this.$refs.loginForm.validate()&&this.$axios.post("api/users/check",{email:this.loginEmail,password:this.loginPassword,name:"",gender:"",age:"",height:0,weight:0}).then((t=>{this.$emit("login",t.data)})).catch((()=>{this.wrong=!0,this.$refs.loginForm.reset(),setTimeout((()=>this.wrong=!1),2e3)}))}}},L=O,j=(0,S.Z)(L,D,T,!1,null,"7e5c3b51",null),q=j.exports,G={name:"WelcomeScreen",components:{UserLogin:q,UserRegister:P},data:()=>({activeTab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}]})},E=G,B=(0,S.Z)(E,g,m,!1,null,null,null),R=B.exports,U=i(5452),F=i(1302),M=function(){var t=this,e=t._self._c;return e(U.Z,{attrs:{value:t.onlyIf,"hide-overlay":"",persistent:"",width:"300"}},[e(p.Z,{attrs:{dark:""}},[e(f.ZB,{staticClass:"text-center pt-2"},[t._v("Preparing "),e(F.Z,{staticClass:"mt-5",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)},N=[],W={name:"AppLoader",props:{onlyIf:Boolean}},z=W,H=(0,S.Z)(z,M,N,!1,null,"01be68e4",null),K=H.exports,J=function(){var t=this,e=t._self._c;return e(U.Z,{attrs:{value:t.onlyIf,persistent:"",width:"300"}},[e(p.Z,{attrs:{dark:""}},[e(f.ZB,{staticClass:"text-center pt-2"},[t._v("Saving "),e(F.Z,{staticClass:"mt-5",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)},Q=[],V={name:"AppSaver",props:{onlyIf:Boolean}},X=V,Y=(0,S.Z)(X,J,Q,!1,null,"4c7d0d5e",null),tt=Y.exports,et=i(9203),it=function(){var t=this,e=t._self._c;return e(et.Z,{attrs:{app:"","min-height":"9vh"}},[e(d.Z,{attrs:{large:""}},[t._v("mdi-heart-pulse")]),e("h2",{staticClass:"ml-4 mt-2",staticStyle:{"font-family":"fantasy"}},[t._v("Health tracker")]),e(v.Z,{attrs:{text:"",fixed:"",right:""},on:{click:function(e){return t.$emit("logout")}}},[t._v(" Logout "),e(d.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-logout")])],1)],1)},st=[],at={name:"NavBar"},ot=at,nt=(0,S.Z)(ot,it,st,!1,null,"787657b4",null),rt=nt.exports,lt=function(){var t=this,e=t._self._c;return e(h.Z,{staticClass:"fill-height",staticStyle:{opacity:"0.8"},attrs:{vertical:"",value:t.activeTab,dark:"","active-class":"font-weight-bold"},on:{change:t.onTabChange}},[t._l(t.menus,(function(i){return e(c.Z,{key:i.title,staticClass:"justify-start pl-6",staticStyle:{width:"15vw"}},[e(d.Z,{attrs:{left:""}},[t._v(t._s(i.icon))]),t._v(" "+t._s(i.title)+" ")],1)})),e(u.Z),e(u.Z,[e("UserActivities",t._g({},t.$listeners))],1),e(u.Z,[e("UserGoals",t._g({ref:"goals"},t.$listeners))],1),e(u.Z,{staticClass:"mt-16"},[e("UserRegister",{attrs:{user:t.getUser(),"is-profile":!0}})],1)],2)},dt=[],ct=i(7652),ut=i(7345),ht=i(5234),gt=i(1002),mt=function(){var t=this,e=t._self._c;return e(ct.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.activities,"sort-desc":"","sort-by":"started","disable-pagination":"",loading:t.loadingActivities,"loading-text":"Loading activities","hide-default-footer":"",height:"80vh","fixed-header":""},scopedSlots:t._u([{key:"top",fn:function(){return[e(gt.Z,{attrs:{flat:""}},[e(ht.Z),e(U.Z,{attrs:{"max-width":"30vw"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e(v.Z,t._g(t._b({attrs:{dark:""}},"v-btn",s,!1),i),[e(d.Z,[t._v("mdi-plus")]),t._v(" Add ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(p.Z,{staticClass:"pa-0 ma-0"},[e(f.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(f.ZB,{staticClass:"pa-1"},[e(o.Z,[e(x.Z,[e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{label:"Description"},model:{value:t.editedItem.description,callback:function(e){t.$set(t.editedItem,"description",e)},expression:"editedItem.description"}})],1),e(Z.Z,{attrs:{cols:"6"}},[e(I.Z,{attrs:{label:"Duration (minutes)",type:"number"},model:{value:t.editedItem.duration,callback:function(e){t.$set(t.editedItem,"duration",e)},expression:"editedItem.duration"}})],1),e(Z.Z,{attrs:{cols:"6"}},[e(I.Z,{attrs:{label:"Calories burned",type:"number"},model:{value:t.editedItem.calories,callback:function(e){t.$set(t.editedItem,"calories",e)},expression:"editedItem.calories"}})],1),e(Z.Z,{attrs:{cols:"12"}},[e(ut.Z,{attrs:{"full-width":"","show-current":"","no-title":""},model:{value:t.editedItem.started,callback:function(e){t.$set(t.editedItem,"started",e)},expression:"editedItem.started"}})],1)],1)],1)],1),e(f.h7,[e(ht.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1),e(U.Z,{attrs:{"max-width":"30vw"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(p.Z,[e(f.EB,{staticClass:"text-subtitle-1 justify-center"},[t._v("Are you sure you want to delete this activity? ")]),e(f.h7,[e(ht.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(ht.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:i}){return[e(d.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(i)}}},[t._v("mdi-pencil")]),e(d.Z,{attrs:{small:""},on:{click:function(e){return t.deleteItem(i)}}},[t._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[t._v("No activities")]},proxy:!0}],null,!0)})},vt=[],pt={name:"UserActivities",data:()=>({loadingActivities:!1,dialog:!1,dialogDelete:!1,headers:[{text:"Description",value:"description"},{text:"Duration (minutes)",value:"duration"},{text:"Calories burned",value:"calories"},{text:"Date",value:"started"},{text:"Actions",value:"actions",sortable:!1}],activities:[],editedIndex:-1,editedItem:{calories:0,description:"",duration:0,started:(new Date).toISOString().split("T")[0]},defaultItem:{calories:0,description:"",duration:0,started:(new Date).toISOString().split("T")[0]}}),computed:{formTitle(){return-1===this.editedIndex?"New Activity":"Edit Activity"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},loadingActivities(t){this.$emit("onLoading",t)}},created(){this.activities=this.$actions.getActivities()},updated(){this.activities=this.$actions.getActivities()},methods:{editItem(t){this.editedIndex=this.activities.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.activities.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.loadingActivities=!0,this.closeDelete(),await this.$axios.delete("api/activities/"+this.activities[this.editedIndex].id),await this.$actions.reloadActivities(),await this.$actions.reloadGoals(),this.loadingActivities=!1},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.loadingActivities=!0,this.close();let t={userId:this.$session.get("user").id,description:this.editedItem.description,duration:this.editedItem.duration,started:new Date(this.editedItem.started).toISOString(),calories:this.editedItem.calories};this.editedIndex>-1?await this.$axios.patch("api/activities/"+this.activities[this.editedIndex].id,t):await this.$axios.post("api/activities",t),await this.$actions.reloadActivities(),await this.$actions.reloadGoals(),this.loadingActivities=!1}}},ft=pt,Zt=(0,S.Z)(ft,mt,vt,!1,null,"c2a1cef6",null),bt=Zt.exports,xt=i(2059),yt=i(2680),wt=function(){var t=this,e=t._self._c;return e(ct.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.goals,"sort-desc":"","sort-by":"started","disable-pagination":"",loading:t.loadingGoals,"loading-text":"Loading goals","hide-default-footer":"",height:"80vh","fixed-header":""},scopedSlots:t._u([{key:"top",fn:function(){return[e(gt.Z,{attrs:{flat:""}},[e(ht.Z),e(U.Z,{attrs:{"max-width":"30vw",on:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e(v.Z,t._g(t._b({attrs:{dark:""}},"v-btn",s,!1),i),[e(d.Z,[t._v("mdi-plus")]),t._v(" Add ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(p.Z,{staticClass:"pa-0 ma-0"},[e(f.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),e(f.ZB,{staticClass:"pa-1"},[e(o.Z,[e(x.Z,[e(Z.Z,{attrs:{cols:"12"}},[e(y.Z,{attrs:{items:t.activities,label:"Select Activity","item-text":"description","item-value":"id",disabled:t.editedIndex>=0},model:{value:t.editedItem.activityId,callback:function(e){t.$set(t.editedItem,"activityId",e)},expression:"editedItem.activityId"}})],1),e(Z.Z,{attrs:{cols:"12"}},[e(I.Z,{attrs:{label:"Target in minutes",type:"number"},model:{value:t.editedItem.target,callback:function(e){t.$set(t.editedItem,"target",e)},expression:"editedItem.target"}}),e(yt.Z,{staticClass:"pl-0"},[t._v("Achieved")])],1),e(Z.Z,{attrs:{cols:"12"}},[e(xt.Z,{attrs:{min:"0",height:"50",max:t.editedItem.target||0,"thumb-label":"always"},model:{value:t.editedItem.current,callback:function(e){t.$set(t.editedItem,"current",e)},expression:"editedItem.current"}})],1)],1)],1)],1),e(f.h7,[e(ht.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1),e(U.Z,{attrs:{"max-width":"30vw"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(p.Z,[e(f.EB,{staticClass:"text-subtitle-1 justify-center"},[t._v(" Are you sure you want to delete this goal? ")]),e(f.h7,[e(ht.Z),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),e(v.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),e(ht.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.activityId",fn:function({item:e}){return[t._v(" "+t._s(t.activityName(e.activityId))+" ")]}},{key:"item.target",fn:function({item:e}){return[t._v(" "+t._s(e.target+" "+e.unit)+" ")]}},{key:"item.current",fn:function({item:i}){return[e(F.Z,{attrs:{"background-opacity":.3,"buffer-value":100,height:25,width:150,value:i.percent,color:"success"}},[e("strong",[t._v(t._s(i.percent)+"%")])])]}},{key:"item.actions",fn:function({item:i}){return[e(d.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(i)}}},[t._v("mdi-pencil")]),e(d.Z,{attrs:{small:""},on:{click:function(e){return t.deleteItem(i)}}},[t._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[t._v("No goals")]},proxy:!0}],null,!0)})},It=[],_t={name:"UserGoals",data:()=>({loadingGoals:!1,dialog:!1,dialogDelete:!1,headers:[{text:"Activity",value:"activityId"},{text:"Target",value:"target"},{text:"Progress",value:"current"},{text:"Actions",value:"actions",sortable:!1}],goals:[],activities:[],editedIndex:-1,editedItem:{target:null,current:0,unit:"minutes",activityId:0},defaultItem:{target:null,current:0,unit:"minutes",activityId:0}}),computed:{formTitle(){return-1===this.editedIndex?"New Goal":"Edit Goal"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},loadingGoals(t){this.$emit("onLoading",t)}},created(){this.setupData()},updated(){this.setupData()},methods:{setupData(){this.goals=this.$actions.getGoals(),this.activities=this.$actions.getActivities()},activityName(t){let e=this.$actions.getActivities().find((e=>e.id===t));return e?e.description:""},editItem(t){this.editedIndex=this.goals.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.goals.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},async deleteItemConfirm(){this.loadingGoals=!0,this.closeDelete(),await this.$axios.delete("api/goals/"+this.goals[this.editedIndex].id),await this.$actions.reloadGoals(),this.loadingGoals=!1},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.loadingGoals=!0,this.close();let t={userId:this.$session.get("user").id,target:this.editedItem.target,current:this.editedItem.current,unit:this.editedItem.unit,activityId:this.editedItem.activityId};this.editedIndex>-1?await this.$axios.patch("api/goals/"+this.goals[this.editedIndex].id,t):await this.$axios.post("api/goals",t),await this.$actions.reloadGoals(),this.loadingGoals=!1}}},kt=_t,$t=(0,S.Z)(kt,wt,It,!1,null,"1be44f9b",null),Ct=$t.exports,St={name:"MainTabs",components:{UserRegister:P,UserActivities:bt,UserGoals:Ct},props:{activeTab:Number},data:()=>({menus:[{title:"Dashboard",icon:"mdi-view-dashboard"},{title:"Activities",icon:"mdi-run"},{title:"Goals",icon:"mdi-bullseye-arrow"},{title:"Profile",icon:"mdi-account"}]}),methods:{onTabChange(){this.$refs.goals&&this.$refs.goals.setupData()},getUser(){return this.$session.get("user")}}},At=St,Pt=(0,S.Z)(At,lt,dt,!1,null,"c5b0a58c",null),Dt=Pt.exports,Tt={name:"App",components:{MainTabs:Dt,NavBar:rt,AppSaver:tt,AppLoader:K,WelcomeScreen:R},data:()=>({activeTab:3,loading:!1,saving:!1}),created(){this.setupStore()},methods:{checkSession(){return this.$session.exists()},async setupStore(){this.$axios.defaults.headers.common["Authorization"]=this.$session.get("auth"),this.checkSession()&&(this.loading=!0,await this.$actions.loadStore(),this.loading=!1)},logout(){this.$session.destroy(),this.activeTab=0,this.$forceUpdate()},async onLogin(t){this.loading=!0,this.$actions.setupSession(t),await this.setupStore(),this.loading=!1},onLoading(t){this.saving=t}}},Ot=Tt,Lt=(0,S.Z)(Ot,r,l,!1,null,null,null),jt=Lt.exports,qt=i(2250);s.ZP.use(qt.Z);var Gt=new qt.Z({}),Et=i(594),Bt=i(3757),Rt=i.n(Bt);i(2801);const Ut=s.ZP.observable({activities:[],goals:[]});async function Ft(){let t=`/api/users/${s.ZP.prototype.$session.get("user").id}/activities`;Ut.activities=(await s.ZP.prototype.$axios.get(t)).data,Ut.activities.map((t=>t.started=t.started.split("T")[0]))}async function Mt(){let t=`/api/users/${s.ZP.prototype.$session.get("user").id}/goals`;Ut.goals=(await s.ZP.prototype.$axios.get(t)).data,Ut.goals.map((t=>t.percent=(100*t.current/t.target).toFixed(0)))}var Nt={setupSession(t){s.ZP.prototype.$session.start(),s.ZP.prototype.$session.set("user",t),s.ZP.prototype.$session.set("auth","Basic "+btoa(t.email+":"+t.password))},async loadStore(){await Ft(),await Mt()},getActivities(){return Ut.activities},getGoals(){return Ut.goals},async reloadActivities(){await Ft()},async reloadGoals(){await Mt()}};s.ZP.prototype.$axios=Et.Z,s.ZP.prototype.$actions=Nt,s.ZP.config.productionTip=!1,s.ZP.use(Rt()),new s.ZP({vuetify:Gt,render:t=>t(jt)}).$mount("#app")}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,a,o){if(!s){var n=1/0;for(c=0;c<t.length;c++){s=t[c][0],a=t[c][1],o=t[c][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(r=!1,o<n&&(n=o));if(r){t.splice(c--,1);var d=a();void 0!==d&&(e=d)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,a,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,o,n=s[0],r=s[1],l=s[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var c=l(i)}for(e&&e(s);d<n.length;d++)o=n[d],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self["webpackChunkhealthtrackerui"]=self["webpackChunkhealthtrackerui"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(2445)}));s=i.O(s)})();
//# sourceMappingURL=app.8ee3b91e.js.map